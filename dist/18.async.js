(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[18],{Pbey:function(e,a,t){"use strict";t.r(a);t("jkjv");var n,i,o,r,l=t("5V8d"),c=(t("2J6m"),t("uHAy")),s=(t("yh/O"),t("KzDW")),p=(t("XNzj"),t("G5Xh")),d=(t("QxUn"),t("nicQ")),u=t("zAuD"),m=t.n(u),y=(t("Kn1l"),t("mxW8")),h=(t("cXFk"),t("uiyS")),v=t("43Yg"),g=t.n(v),f=t("/tCh"),k=t.n(f),D=t("scpF"),b=t.n(D),S=t("O/V9"),E=t.n(S),C=t("8aBX"),w=t.n(C),x=(t("tBAj"),t("HoGm")),N=(t("cW9H"),t("VJ/K")),O=t("i9FB"),z=t.n(O),I=t("84xf"),F=t("Mv1L"),M=t("JqWM"),T=t.n(M),P=N["a"].confirm,j=x["a"].Item,A=(n=Object(I["c"])(function(e){var a=e.rule,t=e.loading,n=e.lesseeDevice;return{lesseeDevice:n,rule:a,loading:t.models.rule}}),i=x["a"].create(),n(o=i((r=function(e){function a(){var e,t;g()(this,a);for(var n=arguments.length,i=new Array(n),o=0;o<n;o++)i[o]=arguments[o];return t=b()(this,(e=E()(a)).call.apply(e,[this].concat(i))),t.state={tab:1,searchForm:{deviceCode:"",model:"",siteId:""},siteTypeOptions:[{value:1,label:"\u76d1\u6d4b\u7ad9"},{value:2,label:"\u5b9e\u9a8c\u5ba4"}],columns:[{title:"\u5e8f\u53f7",dataIndex:"num",key:"num"},{title:"\u8bbe\u5907\u540d\u79f0",dataIndex:"deviceName",key:"deviceName"},{title:"\u8bbe\u5907\u7f16\u53f7",dataIndex:"deviceCode",key:"deviceCode"},{title:"\u8bbe\u5907\u5382\u5546",dataIndex:"manufacturerName",key:"manufacturerName"},{title:"\u8bbe\u5907\u578b\u53f7",dataIndex:"modelName",key:"modelName"},{title:"\u6240\u5728\u5730",dataIndex:"deviceAddress",key:"deviceAddress"},{title:"\u6570\u636e\u5206\u6790\u5458",dataIndex:"dataOperatorName",key:"dataOperatorName"},{title:"\u4e13\u5bb6",dataIndex:"operationsManagerName",key:"operationsManagerName"},{title:"\u64cd\u4f5c",key:"function",width:150,dataIndex:"function",render:function(e,a){return z.a.createElement("span",null,[{type:"primary",text:"\u8be6\u60c5",icon:"snippets",mark:"edit"},{type:"danger",shape:"circle",icon:"close",mark:"delete"}].map(function(e){return z.a.createElement(h["a"],{onClick:function(n){n.preventDefault(),t.showFunctionModal(a.key,e.mark,a)},type:e.type,size:"small",key:e.type,icon:e.icon,shape:e.circle,style:{marginRight:"5px"}},e.text)}))}}],data:[],propsData:{}},t.getTableList=function(){var e=t.props.dispatch;e({type:"lesseeDevice/tableData",payload:{pageNum:1,pageSize:10}})},t.getOptions=function(){var e=t.props.dispatch;e({type:"lesseeDevice/deviceManufacturerOptions",payload:{}}),e({type:"lesseeDevice/testMethodOptions",payload:{}})},t.showFunctionModal=function(e,a,n){var i=t.props.dispatch;switch(a){case"add":t.setState({propsData:{visible:!0,key:e,type:a}});break;case"edit":i({type:"lesseeDevice/modelOptions",payload:{manufacturerId:n.manufacturerId}}),t.setState({propsData:{visible:!0,key:e,type:a,data:n}});break;default:P({title:"\u505c\u7528",content:"\u786e\u8ba4\u505c\u7528\u8be5\u8bbe\u5907\uff1f",okText:"\u786e\u8ba4",okType:"danger",cancelText:"\u53d6\u6d88",onOk:function(){i({type:"lesseeDevice/remove",payload:{id:n.id}})},onCancel:function(){console.log("Cancel")}})}},t.onSure=function(e){var a=t.state.propsData.type,n=t.state.data;"add"===a?n.push(e):n=n.map(function(a){return a.key===e.key?e:a}),t.setState({propsData:{visible:!1},data:n})},t.onCancel=function(){t.setState({propsData:{visible:!1}})},t.onSearch=function(e){e.preventDefault();var a=t.props.dispatch;t.props.form.validateFields(function(e,t){if(!e){var n=Object.keys(t).some(function(e){return!t[e]});n&&a({type:"lesseeDevice/search",payload:t})}})},t.changePage=function(e,a){var n=t.props.dispatch;n({type:"lesseeDevice/tableData",payload:{pageNum:e,pageSize:a}})},t.changePageSize=function(e,a){var n=t.props.dispatch;n({type:"lesseeDevice/tableData",payload:{pageNum:e,pageSize:a}})},t}return w()(a,e),k()(a,[{key:"componentDidMount",value:function(){this.getTableList(),this.getOptions()}},{key:"render",value:function(){var e=this,a={labelCol:{span:8},wrapperCol:{span:16}},t=this.state.searchForm,n=this.props.form.getFieldDecorator,i=z.a.createElement(x["a"],{onSubmit:this.onSearch},z.a.createElement(p["a"],{gutter:20},z.a.createElement(d["a"],{span:5},z.a.createElement(j,m()({},a,{label:"\u8bbe\u5907\u7f16\u53f7"}),n("deviceCode",{initialValue:t.deviceCode})(z.a.createElement(y["a"],null)))),z.a.createElement(d["a"],{span:5},z.a.createElement(j,m()({},a,{label:"\u8bbe\u5907\u578b\u53f7"}),n("model",{initialValue:t.model})(z.a.createElement(y["a"],null)))),z.a.createElement(d["a"],{span:5},z.a.createElement(x["a"].Item,null,z.a.createElement(h["a"],{style:{marginRight:10},icon:"search",type:"",htmlType:"submit"},"\u67e5\u8be2"),z.a.createElement(h["a"],{icon:"plus",type:"primary",onClick:function(){return e.showFunctionModal("add","add")}},"\u65b0\u589e"))))),o=this.props.lesseeDevice.tableData,r=this.props.lesseeDevice.pageNation;return z.a.createElement("div",{className:T.a.tableWrap},z.a.createElement("h1",null,z.a.createElement(s["a"],{type:"cloud-server"})," \u8bbe\u5907\u5217\u8868"),z.a.createElement(c["a"],{style:{marginBottom:20}}),i,z.a.createElement(l["a"],{columns:this.state.columns,dataSource:o,rowKey:function(e){return e.id},pagination:{showQuickJumper:!0,showSizeChanger:!0,pageSizeOptions:["10","20","30"],pageSize:r.pageSize,current:r.current,total:r.total,showTotal:function(){return"\u5171".concat(r.total,"\u6761")},onChange:this.changePage,onShowSizeChange:this.changePageSize,hideOnSinglePage:r.disabled}}),z.a.createElement(F["default"],{data:this.state.propsData,onSure:this.onSure,onCancel:this.onCancel}))}}]),a}(O["PureComponent"]),o=r))||o)||o);a["default"]=A}}]);